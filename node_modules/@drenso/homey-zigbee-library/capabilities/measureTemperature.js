"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const zigbee_clusters_1 = require("zigbee-clusters");
const attributeDevice_1 = require("../lib/attributeDevice");
async function initMeasureTemperatureDevice(device, zclNode, capabilityId = 'measure_temperature', endpointId) {
    await (0, attributeDevice_1.initReadOnlyCapability)(device, zclNode, capabilityId, zigbee_clusters_1.CLUSTER.TEMPERATURE_MEASUREMENT, 'measuredValue', (value) => {
        // Value comes from int16
        // Check for invalid values
        if (value == 0x8000)
            return null;
        if (value < -0x154D || value > 0x7FFE) {
            device.error('Temperature value outside valid range');
            return null;
        }
        // MeasuredValue represents the temperature in degrees Celsius as follows:
        // MeasuredValue = 100 x Temperature in degrees Celsius
        return Math.round((value / 100) * 10) / 10;
    }, 10, undefined, endpointId);
}
exports.default = initMeasureTemperatureDevice;
